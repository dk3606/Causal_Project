---
title: "Causal_Project"
author: "Nerurkar Jui A"
date: "11/4/2019"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
set.seed(1234)
n <- 10000
p <- 7

# create the covariates such that they are normalized
Xi <- matrix(NA,n,p)

Xi[,1] <-  rbinom(10000,1,0.52) # Gender
Xi[,2] <- ifelse(Xi[,1] == 1, rnorm(n,185,10),rnorm(n,165,10)) # Weight
Xi[,3] <- rnorm(n,50,5)# Age
Xi[,4] <- Xi[,2]/7 + 2 + rnorm(n) # BMI
Xi[,5] <- (rnorm(n,5,1)) # Tumor Size
Xi[,6] <- rbinom(10000, 1, 0.7) # HBP
Xi[,7] <- rbinom(10000,1,(Xi[,5]-min(Xi[,5]))/(max(Xi[,5])-min(Xi[,5]))) # Relapse
 
X_mat <- cbind(rep(1, n),Xi)
colnames(X_mat) = c('beta0','Gender','Weight', 'Age', 'BMI', 'Size_Tumor','HBP', 'Relapse')
# Parameters 
# beta - vector of slopes for the covariates to generate Y
beta <- c(-0.98, 0.803, 2.2, 1.17, 0.77, 0.027, 1.18, 0.187)
# vector of slopes for the covariates to generate tau
gamma <- c(-7, 0.064, 0.0099, 0.0303, 0.0124, 0.523, -0.0099, -0.00288)

tau <- X_mat%*%gamma 
Y0 <- (X_mat/100)%*%beta + rnorm(n,0,1)
Y1 <- (X_mat/100)%*%beta + tau + rnorm(n, 0, 1)
```

```{r}
hist(tau)
mean(tau)
god_data <- data.frame(X_mat[,-1], treat = treat, Y1 = Y1, Y0 = Y0)
plot(god_data$Weight, tau)
plot(god_data$Age, tau)
plot(god_data$BMI, tau)
plot(god_data$Size_Tumor, tau)
```

Researcher's role:
Treatment assignment was completely random
Assign treatment and generate new data
```{r}
treat = rbinom(n, 1, 0.5)
researcher_data  <- data.frame(X_mat[,-1], treat = treat, Y = ifelse(treat == 1, Y1, Y0))
```


###Just directly do bayesian causal forests and causal forests

```{r}

```

